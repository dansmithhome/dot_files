function sql()
{
    local db=Measurements

    if [[ $1 = -d ]]
    then
        db=${2}
        echo ${db} > ~/.sql-db
        shift
        shift
    else
        [[ -f ~/.sql-db ]] && db=$( < ~/.sql-db )
    fi

    if [[ $# = 0 ]]
    then
        echo ${db}
        return
    fi

    local COMMAND
    case ${1} in
        sampleattribute|sampleattr|sa)
            shift
            COMMAND="select SA.UID,A.Name,Number,Date,Substring(replace(Text,'\\n','+'),1,50) as Text from translational_sampleattribute SA, Attribute A where SA.AttributeUID = A.UID  ${*}"
            ;;
        studyattribute|sta|stattr)
            shift
            COMMAND="select SA.UID,A.Name,Number,Date,Substring(replace(Text,'\\n','+'),1,50) as Text from translational_studyattribute SA, Attribute A where SA.AttributeUID = A.UID  ${*}"
            ;;
        visitattribute|va|vattr)
            shift
            COMMAND="select SA.UID,A.Name,Number,Date,Substring(replace(Text,'\\n','+'),1,50) as Text from translational_visitattribute SA, Attribute A where SA.AttributeUID = A.UID  ${*}"
            ;;
        cohortattribute|ca|coattr)
            shift
            COMMAND="select SA.UID,A.Name,Number,Date,Substring(replace(Text,'\\n','+'),1,50) as Text from translational_cohortattribute SA, Attribute A where SA.AttributeUID = A.UID  ${*}"
            ;;
        subjectattribute|subjectattr|suattr)
            shift
            COMMAND="select SA.UID,A.Name,Number,Date,Substring(replace(Text,'\\n','+'),1,50) as Text from translational_subjectattribute SA, Attribute A where SA.AttributeUID = A.UID  ${*}"
            ;;
        measurement_setattribute|msattr)
            shift
            COMMAND="select SA.UID,A.Name,Number,Date,Substring(replace(Text,'\\n','+'),1,50) as Text from measurement_setattribute SA, Attribute A where SA.AttributeUID = A.UID  ${*}"
            ;;
        study)
            shift
            COMMAND='select * from translational_study '"${*}"
            ;;
        entity)
            shift
            COMMAND='select E.UID,E.name,D.name,E.description from entity E, Domain D where E.domainuid = D.UID '"${*}"
            ;;
        cohort)
            shift
            COMMAND='select * from translational_cohort '"${*}"
            ;;
        subject)
            shift
            COMMAND='select * from translational_subject '"${*}"
            ;;
        visit)
            shift
            COMMAND='select * from translational_visit '"${*}"
            ;;

        sample)
            shift
            COMMAND='select * from translational_sample '"${*}"
            ;;
        attr)
            shift
            COMMAND='select A.UID,A.Name as Attribute_Name,T.name as Type,A.Description,A.IsFullText,A.IsDefault,A.SearchWeight as Type from attribute A, Entity E, Type T where E.UID=A.entityUID and T.UID=A.typeUID'"${*}"
            ;;
        row)
            shift
            COMMAND='select distinct MV.UID,A.Name,Number,Date,Text from  measurement_value MV, measurement_column MC, Attribute A where A.UID=MC.attributeuid and MV.measurement_ColumnUID=A.UID order by MV.UID asc '"${*}"
            ;;
        *)
            COMMAND=${*}
            ;;
    esac
    echo mysql -e "${COMMAND}"  ${db}
    mysql -e "${COMMAND}"  ${db}
}

